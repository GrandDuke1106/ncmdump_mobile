# ncmdump-mobile

è¿™æ˜¯ä¸€ä¸ªåŸºäº Flutter å¼€å‘çš„å°ç©å…·ï¼Œä¸º [ncmdump-go](https://git.taurusxin.com/taurusxin/ncmdump-go) æä¾›äº†ç°ä»£åŒ–çš„ç§»åŠ¨ç«¯å›¾å½¢ç•Œé¢ã€‚

Windows ç«¯ä¹Ÿå¯ä»¥ä½¿ç”¨[ncmdump-gui](https://git.taurusxin.com/taurusxin/ncmdump-gui)ã€‚æœ¬ç¨‹åºçš„ ui å®Œå…¨ä¸ºæ‰‹æœºè®¾è®¡ï¼Œæ¡Œé¢ç«¯ï¼ˆWindows, Linuxï¼‰å¯èƒ½ç”¨å¾—ä¸é¡ºæ‰‹ï¼Œä¸è¿‡ç›¸åŒçš„åç«¯åŠŸèƒ½éƒ½ä¸€æ ·ã€‚

å®ƒå¯ä»¥å¸®åŠ©ä½ åœ¨å„ç§è®¾å¤‡ä¸Šç›´æ¥å°†ç½‘æ˜“äº‘éŸ³ä¹çš„ `.ncm` æ–‡ä»¶è½¬æ¢ä¸ºæ™®é€šçš„ `.mp3` æˆ– `.flac` æ ¼å¼ï¼Œå¹¶è‡ªåŠ¨è¡¥å…¨ä¸“è¾‘å°é¢ç­‰å…ƒæ•°æ®ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

* **æ‰¹é‡è½¬æ¢**ï¼šæ”¯æŒæ·»åŠ å•ä¸ªæ–‡ä»¶æˆ–æ‰«ææ•´ä¸ªç›®å½•ä¸‹çš„ `.ncm` æ–‡ä»¶ã€‚
* **å…ƒæ•°æ®ä¿®å¤**ï¼šè½¬æ¢åŒæ—¶è‡ªåŠ¨ä¸‹è½½å¹¶ä¿®å¤æ­Œæ›²çš„ä¸“è¾‘å°é¢ã€æ­Œæ‰‹ã€ä¸“è¾‘åç­‰ä¿¡æ¯ã€‚
* **æ™ºèƒ½åˆ†ç»„**ï¼šè‡ªåŠ¨æŒ‰ç›®å½•åˆ†ç»„æ˜¾ç¤ºæ–‡ä»¶ï¼Œæ¸…æ™°ç›´è§‚ã€‚
* **ç›®å½•å†å²**ï¼šè®°ä½ä½ æ·»åŠ è¿‡çš„ç›®å½•ï¼Œæ”¯æŒä¸‹æ‹‰åˆ·æ–°ï¼Œä¸€é”®é‡æ–°æ‰«ææ‰€æœ‰å†å²ç›®å½•ã€‚

## ğŸš€ ç¼–è¯‘æŒ‡å—

å¦‚æœä½ æƒ³è‡ªå·±ç¼–è¯‘è¿™ä¸ªé¡¹ç›®ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿ä½ å·²ç»å®‰è£…äº†ä»¥ä¸‹ç¯å¢ƒï¼š
* Flutter SDK
* Go 1.24+
* Android Studio & Android SDK
* `gomobile` å·¥å…·:
    ```bash
    cd exc
    go install golang.org/x/mobile/cmd/gomobile@latest
    gomobile init
    ```

### 2. ç¼–è¯‘ Go æ ¸å¿ƒåº“

æœ¬é¡¹ç›®ä¾èµ– `ncmdump-go` çš„æ ¸å¿ƒé€»è¾‘ã€‚ä½ éœ€è¦å…ˆå°† Go ä»£ç ç¼–è¯‘ä¸º Android, Windows æˆ–è€… Linux çš„ `.aar`, `dll` æˆ–è€… `so` åº“ã€‚

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
# å¦‚æœé‡åˆ° javac æŠ¥é”™ï¼Œè¯·æ£€æŸ¥ JAVA_HOME ç¯å¢ƒå˜é‡
cd exc
gomobile bind -target=android -androidapi 21 -o ../ncmdump_mobile/android/app/libs/ncmdump.aar ./mobile
go build -buildmode=c-shared -o ../ncmdump_mobile/windows/runner/ncmdump.dll export.go ./desktop
go build -buildmode=c-shared -o ../ncmdump_mobile/linux/libncmdump.so export.go ./desktop
````

### 3. å®‰è£… Flutter ä¾èµ–

```bash
cd ncmdump_mobile
flutter pub get
```

### 4. è¿è¡Œæˆ–æ‰“åŒ…

è¿æ¥ä½ çš„éœ€è¦è°ƒè¯•çš„è®¾å¤‡ï¼š

```bash
# è°ƒè¯•è¿è¡Œ
flutter run

# æ‰“åŒ…å„ä¸ªå¹³å°çš„è½¯ä»¶
flutter build apk --release --split-per-abi
flutter build windows --release
flutter build linux --release
```

## ğŸ“¦ ä¸»è¦ä¾èµ–åº“

* **`ffi`**: å¤–éƒ¨å‡½æ•°æ¥å£ï¼Œç”¨äºè°ƒç”¨ Go ç¼–å†™çš„ `ncmdump` æ ¸å¿ƒåŠ¨æ€åº“ã€‚
* **`file_picker`**: è·¨å¹³å°çš„æ–‡ä»¶ä¸ç›®å½•é€‰æ‹©å™¨ã€‚
* **`permission_handler`**: å¤„ç† Android å’Œ iOS çš„è¿è¡Œæ—¶æƒé™è¯·æ±‚ã€‚
* **`provider`**: ç®€å•é«˜æ•ˆçš„åº”ç”¨çŠ¶æ€ç®¡ç†ã€‚
* **`shared_preferences`**: æœ¬åœ°æŒä¹…åŒ–å­˜å‚¨ï¼Œç”¨äºä¿å­˜ç›®å½•æ‰«æå†å²ã€‚
* **`device_info_plus`**: è·å–è®¾å¤‡ä¿¡æ¯ï¼Œç”¨äºé€‚é…ä¸åŒ Android ç‰ˆæœ¬çš„æƒé™ç­–ç•¥ã€‚
* **`path_provider`**: è·å–å„å¹³å°çš„å¸¸ç”¨æ–‡ä»¶è·¯å¾„ï¼ˆå¦‚æ–‡æ¡£ç›®å½•ã€ä¸´æ—¶ç›®å½•ï¼‰ã€‚
* **`flutter_launcher_icons`** (Dev): è‡ªåŠ¨åŒ–ç”Ÿæˆå’Œé…ç½®æ‰€æœ‰å¹³å°çš„åº”ç”¨å¯åŠ¨å›¾æ ‡ã€‚

## âš–ï¸ å…è´£å£°æ˜

æœ¬é¡¹ç›®åŸºäº[MIT](LICENSE)å¼€æºï¼Œä¸æä¾›æ‹…ä¿ã€‚

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’ŒæŠ€æœ¯ç ”ç©¶ä½¿ç”¨ã€‚è¯·å‹¿å°†æœ¬è½¯ä»¶ç”¨äºä»»ä½•å•†ä¸šç”¨é€”æˆ–ä¾µçŠ¯ç¬¬ä¸‰æ–¹ç‰ˆæƒçš„è¡Œä¸ºã€‚ä½¿ç”¨æœ¬è½¯ä»¶äº§ç”Ÿçš„ä»»ä½•æ³•å¾‹åæœç”±ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…ã€‚

## ğŸ™ è‡´è°¢

åç«¯æ¥è‡ªäºï¼š[ncmdump-go](https://git.taurusxin.com/taurusxin/ncmdump-go)

